# 电导魔方绕桩

思路+代码，参数同八字，自调！

**参数自调！**

**参数自调！**

**参数自调！**

## 代码思路
- 使用opencv识别Colors队列中的颜色，取最大的色块，根据每个颜色规定的方向，取定对应左下角或右下角作为目标使用pid开往
- 同时另一线程中不断用超声波模块测量魔方的距离，当距离过小时进行下一步。
  -  如果队列中还有元素，则说明还未结束，dequeue出下一个颜色，重复以上步骤。
  -  如果队列已空，则直接直行，冲向重点线。

## 以下说明如何调参
- 保守起见，现在勉强能跑，所以速度开得极小，为增加速度可将leftspeed和rightspeed调大
- 在拐弯时需要根据具体速度，调节拐弯幅度，故pid需要调整至合适值
- 由于速度发生改变，由于惯性，CanForward()函数中的安全距离20要随之调整
- 另，为确保魔方颜色准确，可以在现场使用opencv拍摄魔方照片，使用色彩提取工具，获取更精确的hsv参数

## 如何使用代码
可以根据每个老师的具体要求修改Colors和Color2Dirction中颜色的顺序和每个颜色对应的方向
最后强调，**一定要调参！一定要调参！一定要调参！**
（本人参数只是处于刚刚能跑状态，且魔方摆放位置不是特别极端）

## 免责声明
**如果您的小车无法完成魔方绕桩，或在考试时出现问题，本人不负任何责任！！！**
这很有可能是您的参数和您的小车状态不匹配！
**代码仅供个人参考，请勿进行其他用途！**
